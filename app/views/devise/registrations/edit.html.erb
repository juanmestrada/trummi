<% content_for :title, "Change Password - Trummi" %>

<div id="settings_password">

  <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, class: "edit_user d-flex flex-column" }) do |f| %>

  <div class="mb-5" align="center">
    <h4>Change Password</h4>
  </div>

    <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
      <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
    <% end %>


    <div class="form-group mb-4">
      <div class="form-floating mb-2">
        <%= f.password_field :current_password, placeholder: "Current password", autocomplete: "off", type: "password", class: "form-control shadow-sm bg-white rounded", id: "floatingInput" %>
        <label for="floatingInput">Current password</label> 
      </div> 
    </div>

    <div class="form-group mb-4">
      <div class="form-floating mb-2">
        <%= f.password_field :password, placeholder: "New Password", autocomplete: "off", type: "password", class: "form-control shadow-sm bg-white rounded", id: "floatingPassword" %>
        <label for="floatingPassword">New Password</label> 
      </div>
      
      <% if @minimum_password_length %>
        <span class="text-secondary">(<%= @minimum_password_length %> characters minimum)</span>
      <% end %> 
    </div>

    <div class="form-group mb-3">
      <div class="form-floating">
        <%= f.password_field :password_confirmation, placeholder: "Confirm New Password", autocomplete: "off", type: "password", class: "form-control shadow-sm bg-white rounded" %>
        <label for="floatingPassword">Confirm New Password</label> 
      </div>
    </div>

    <div class="row mb-2" id="error-div">
      <%= render "devise/shared/error_messages", resource: resource %>
    </div>

    <div class="form-group mt-auto mb-5" align="center">
      <%= f.button "Update Password", class: "post-btn rounded-pill w-100", data: {disable_with: "<i class='fas fa-spinner fa-spin'></i>"} %>
    </div>

  <% end %>

</div>